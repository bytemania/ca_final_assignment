\clearpage
\section{Appendix}

\subsection{Statistics Description}

So do describe the variables we will  

```{r, echo=TRUE}
feat_desc_num <- function(variable_name, binwidth = 5) {
  summary_stats <- census %>%
    group_by(income) %>%
    summarise(count = n(),
              mean = mean(!!sym(variable_name), na.rm = TRUE),
              median = median(age, na.rm = TRUE),
              min = min(!!sym(variable_name)),
              max = max(!!sym(variable_name), na.rm = TRUE),
              kurtosis = kurtosis(!!sym(variable_name), na.rm = TRUE),
              skewness = skewness(!!sym(variable_name), na.rm = TRUE),
              .groups = "drop") %>%
    ungroup()
  
  g <- ggplot(census, aes(x = !!sym(variable_name), fill = income)) +
       geom_histogram(binwidth = binwidth, position = "dodge", alpha = 0.7) + 
       theme_minimal() +
       labs(title = paste("Frequency of income by ", variable_name)) + 
       theme(plot.title = element_text(hjust = 0.5)) 
  
  grid.draw(g)  
  kable(summary_stats, "latex")
}

feat_desc_cat <- function(variable_name, render_table = TRUE) {
  summary_stats <- census %>%
    group_by(!!sym(variable_name), income) %>%
    summarise(count = n(), .groups = "drop") %>%
    mutate(proportion = count / sum(count)) %>%
    ungroup()  %>%
    mutate(percent = scales::percent(proportion, 1)) 
  
  g <- ggplot(summary_stats, aes(x = !!sym(variable_name), y = proportion, fill = income)) +
    geom_bar(stat = "identity", position = position_dodge()) +
    theme_minimal() +
    labs(title = paste("Proportion of income by ", variable_name)) + 
    theme(plot.title = element_text(hjust = 0.5)) + 
    theme(axis.text.x = element_text(angle = 90, hjust = 1)) 
  
  grid.draw(g)  
  if (render_table) {
    kable(summary_stats, "latex")
  }
}
```


\subsubsection{fnlwgt}

The majority of individuals have a fnlwgt (final weight) value below 200,000, with a 
significant drop-off beyond this range.
Most individuals with higher fnlwgt values earn <=50K.

The histogram is heavily right-skewed, indicating that most individuals have 
lower fnlwgt values.

```{r, echo=TRUE}
feat_desc_num('fnlwgt', 100000)
```
\subsubsection{education.num}

education.num, represents the number of years of education.
Observations:
\begin{itemize}
\item Majority of individuals in the dataset havevaround 9-10 years of education;
\item Individuals with fewer years of education (1-9 years) tend to earn <=50K;
\item Individuals with more than 10 years of education, there is a noticeable 
increase in the proportion of those earning >50K.
\end{itemize}


```{r, echo=TRUE}
feat_desc_num('education.num', 1)
```

\subsubsection{education}

There is a positive correlation between higher education levels and the 
likelihood of earning >50K.

```{r, echo=TRUE}
feat_desc_cat('education')
```
\subsubsection{capital.gain}

The majority of individuals have a capital gain of 0. This is evident from
the tall bar at the 0 mark for both income categories.

Among individuals with non-zero capital gains, those earning >50K are 
more prevalent. This indicates that individuals with higher capital gains 
are more likely to earn >50K.

```{r, echo=TRUE}
feat_desc_num('capital.gain', 10000)
```

\subsubsection{capital.loss}

Capital losses are generally low and infrequent. They are more common among 
higher earners when they do occur. This may reflect the financial activities 
and investment behaviors of higher-income individuals who might have more
complex financial portfolios that include both gains and losses.

```{r, echo=TRUE}
feat_desc_num('capital.loss', 500)
```

\subsubsection{age}

As a person get older your income tends to grow. This has to do with the career
progression.
In older age groups this number the earning decline, possibly because of retirement.


```{r, echo=TRUE}
feat_desc_num('age')
```

\subsubsection{sex}

A higher proportion of males earn >50K compared to females.
The proportion of females earning <=50K is significantly higher
than the proportion of females earning >50K.

```{r, echo=TRUE}
feat_desc_cat('sex')
```

\subsubsection{hours.per.week}

There is a positive correlation between the number of hours worked per week
and the likelihood of earning >50K. This trend is particularly evident among
those working more than the standard 40 hours per week. 

```{r, echo=TRUE}
feat_desc_num('hours.per.week', 3)
```

\subsubsection{workclass}

Private sector and Self-employment achieves higher income.

```{r, echo=TRUE}
feat_desc_cat('workclass')
```

\subsubsection{occupation}

Occupations such as executive/managerial, professional specialties, and 
protective services show higher earning potential, while roles in 
administrative, clerical, farming, and private household services are
associated with lower incomes.

```{r, echo=TRUE}
feat_desc_cat('occupation')
```
\subsubsection{relationship}

Husbands tend to have higher incomes compared to wives, and individuals in
other categories such as not-in-family, other relatives, own children,
and unmarried are more likely to have lower incomes.

```{r, echo=TRUE}
feat_desc_cat('relationship')
```

\subsubsection{marital.status}

Married individuals, particularly those with civilian spouses, have higher
earning potential, while those who are divorced, separated, never-married, or 
widowed are more likely to have lower incomes.

```{r, echo=TRUE}
feat_desc_cat('marital.status')
```

\subsubsection{native.country}

Individuals from the United States having a higher likelihood of earning >50K 
compared to those from other countries.

```{r, echo=TRUE}
feat_desc_cat('native.country', FALSE)
```

\subsubsection{race}

The majority of individuals identified as White earn <=50K, but there is also a 
significant proportion earning >50K.
This group has the highest overall number of individuals in both 
income categories.

```{r, echo=TRUE}
feat_desc_cat('race')
```

\subsubsection{income}
Income is the target variable.
The majority of individuals in the dataset earn <=50K. This is indicated by 
the much taller bar representing the <=50K category.
A smaller proportion of individuals earn >50K.


```{r, echo=TRUE}
stats <- table(census$income)
  
g <- ggplot(census, aes(x = income)) +
     geom_bar() + 
     theme_minimal() +
     labs(title = "Frequency of income") + 
     theme(plot.title = element_text(hjust = 0.5)) 
  
grid.draw(g)
kable(stats, "latex")
```


